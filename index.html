<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Earth Year</title>
  </head>
  <body>
    <div x-data="app" class="page">
      <!-- Title -->
      <div class="title-div">
        <p>
          If the age of the Earth (<span x-text="earthAge / (10 ** 9)"></span>
          billion years) were scaled to the current year, it would be
        </p>
        <h1
          x-text="earthYearDisplay"
          @click="yearClicked()"
          title="Click to change units"
          class="prevent-select"
        ></h1>
      </div>

      <!-- Eras progress bars -->
      <div class="eras-div">
        <template x-for="(e, index) in eras">
          <span
            class="era-box"
            :title="e.name"
            :style="`width: ${8*e.percent}%;`"
          >
            <span
              class="era-progress"
              :style="`
                background-color: ${e.color};
                width: ${index < currentEraIndex ? 100 : (index > currentEraIndex ? 0 : currentEraPercentage)}%;
              `"
            >
            </span>
            <span class="progress-text" x-text="e.name"> </span>
          </span>
        </template>
      </div>

      <!-- Current era section of the page -->
      <div class="current-era-section">
        <p class="title-div" style="margin: 35px 0px 5px 0px">
          The current era is
        </p>

        <!-- Current era progress bar -->
        <div class="current-era-div">
          <span class="era-box" style="width: 100%; border: 1px solid #493548">
            <span
              class="era-progress"
              :style="`
                background-color: ${currentEra?.color};
                width: ${currentEraPercentage}%;
                justify-content: center;
              `"
            >
            </span>
            <span class="progress-text" x-text="eras[currentEraIndex].name">
            </span>
          </span>
        </div>

        <!-- Current era start and end dates -->
        <div class="current-era-endpoints">
          <span x-text="startLocal" style="text-align: left"></span>
          <span x-text="endLocal" style="text-align: right"></span>
        </div>
        <div class="current-era-endpoints">
          <span style="text-align: left">
            <span x-text="currentEra?.startYear / 1000000"></span>
            Mya
          </span>
          <span style="text-align: left">
            <span x-text="currentEra?.endYear / 1000000"></span>
            Mya
          </span>
        </div>
      </div>

      <!-- Offset days left/right -->
      <div
        style="
          display: flex;
          flex-direction: column;
          align-items: center;
          margin: 10px;
        "
      >
        <div x-text="offsetDays === 0 ? 'Real local time:' : 'Offset local time:'"></div>
        <div style="margin-bottom: 10px">
          <span x-text="currentTime"></span>
        </div>
        <div>
          <span style="margin: 5px 5px 0px 0px">Offset by</span>
          <input
            type="number"
            x-model.number="offsetDays"
            style="width: 30px"
          />
          <span style="margin: 5px 5px 0px 0px">days</span>
          <button x-on:click="incrementOffsetDays(-1)" style="margin: 5px">
            -1
          </button>
          <button x-on:click="incrementOffsetDays(1)" style="margin: 5px">
            +1
          </button>
          <button
            x-on:click="resetOffsetDays()"
            style="margin: 5px"
            :disabled="offsetDays==0"
          >
            Reset
          </button>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
